<div>
  <div>
    <label for="name">Name</label>
    <input type="text" name="name" id="name" value="<%= locals.existing ? existing.details.name : "" %>" required>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 7v14" />
      <path
        d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z" />
    </svg>
  </div>
  <div>
    <label for="stock">Stock</label>
    <input type="number" name="stock" id="stock" min="0" value="<%= locals.existing ? existing.details.stock : "" %>" required>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path
        d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z" />
      <path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12" />
      <path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17" />
    </svg>
  </div>
</div>

<div>
  <div>
    <label for="price">Price</label>
    <input type="number" name="price" id="price" min="0" step=".01" value="<%= locals.existing ? existing.details.price.slice(1,) : "" %>" required>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M6 3h12" />
      <path d="M6 8h12" />
      <path d="m6 13 8.5 8" />
      <path d="M6 13h3" />
      <path d="M9 13c6.667 0 6.667-10 0-10" />
    </svg>
  </div>
  <div>
    <label for="publicationdate">Publication Date</label>
    <input type="date" name="publicationdate" id="publicationdate" value="<%= locals.existing ? locals.existing.details.publicationdate.toJSON().split("T")[0] : "" %>" required>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M8 2v4" />
      <path d="M16 2v4" />
      <rect width="18" height="18" x="3" y="4" rx="2" />
      <path d="M3 10h18" />
    </svg>
  </div>
</div>

<div>
  <div>
    <label for="authors">Authors</label>
    <select name="authors" id="authors" multiple required title="Ctrl+Click to select multiple options">
      <% if (locals.existing) { %>
        <% locals.existing.authors.forEach((author)=> { %>
          <option value="<%= author.id %>" selected>
            <%= author.name %>
          </option>
        <% }); %>
      <% } %>
      <% locals.authors.forEach((author) => { %>
        <option value="<%= author.id %>" >
          <%= author.name %>
        </option>
      <% }); %>
    </select>
  </div>
  <div>
    <label for="genres">Genres</label>
    <select name="genres" id="genres" multiple required title="Ctrl+Click to select multiple options">
      <% if (locals.existing) { %>
        <% locals.existing.genres.forEach((genre) => { %>
          <option value="<%= genre.id %>" selected>
            <%= genre.type %>
          </option>
        <% }); %>
      <% } %>
      <% locals.genres.forEach((genre)=> { %>
        <option value="<%= genre.id %>">
          <%= genre.type %>
        </option>
        <% }); %>
    </select>
  </div>
</div>

<button type="submit">
  <%= locals.selection === "edit-book" ? "Update" : "Add" %> Book
</button>
